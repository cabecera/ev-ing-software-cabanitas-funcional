<%- include('../partials/header', { title: cabana.nombre }) %>
<%- include('../partials/navbar') %>

<h1><%= cabana.nombre %></h1>

<div class="cabana-details">
    <p><strong>Capacidad:</strong> <%= cabana.capacidad %> personas</p>
    <p><strong>Precio por noche:</strong> $<%= parseFloat(cabana.precioNoche).toLocaleString() %></p>
    <% if (cabana.estado === 'mantenimiento') { %>
        <p><strong>Estado:</strong>
            <span class="badge badge-warning">En Mantenimiento</span>
        </p>
    <% } %>
    <p><strong>Descripción:</strong></p>
    <p><%= cabana.descripcion %></p>

    <div style="margin-top: 1.5rem;">
        <% if (cabana.estado === 'mantenimiento') { %>
            <span class="btn btn-secondary" style="opacity: 0.6; cursor: not-allowed;">No Disponible - En Mantenimiento</span>
        <% } else if (typeof user !== 'undefined' && user && user.role === 'cliente') { %>
            <a href="/reservas/solicitar?cabanaId=<%= cabana.id %>" class="btn btn-primary">Reservar Ahora</a>
        <% } else if (typeof user === 'undefined' || !user) { %>
            <a href="/auth/login?redirect=/cabanas/<%= cabana.id %>" class="btn btn-primary">Inicia Sesión para Reservar</a>
        <% } else { %>
            <span class="btn btn-secondary" style="opacity: 0.6; cursor: not-allowed;">Solo para Clientes</span>
        <% } %>

        <% if (typeof user !== 'undefined' && user && user.role === 'admin') { %>
            <a href="/cabanas/<%= cabana.id %>/editar" class="btn btn-secondary" style="margin-left: 0.5rem;">Editar</a>
        <% } %>
    </div>
</div>

<%- include('../partials/footer') %>




