<%- include('../partials/header', { title: 'Check-in y Firma de Inventario' }) %>
<%- include('../partials/navbar') %>

<h1>Check-in: <%= reserva.cabana.nombre %></h1>

<div class="reserva-info">
    <p><strong>Fecha de llegada:</strong> <%= new Date(reserva.fechaInicio).toLocaleDateString() %></p>
    <p><strong>Fecha de salida:</strong> <%= new Date(reserva.fechaFin).toLocaleDateString() %></p>
</div>

<form method="POST" action="/checkin/<%= reserva.id %>" class="form">
    <h2>Verificaci칩n de Inventario</h2>

    <% if (items && items.length > 0) { %>
        <div class="inventario-list">
            <% items.forEach(item => { %>
            <div class="inventario-item">
                <label>
                    <input type="checkbox" name="itemsVerificados" value="<%= item.id %>"
                           <%= item.verificado ? 'checked' : '' %>>
                    <strong><%= item.nombre %></strong>
                    <% if (item.descripcion) { %>
                        <p><%= item.descripcion %></p>
                    <% } %>
                </label>
            </div>
            <% }); %>
        </div>
    <% } else { %>
        <p>No hay items de inventario configurados para verificar.</p>
    <% } %>

    <div class="form-group">
        <label for="observaciones">Observaciones (opcional):</label>
        <textarea id="observaciones" name="observaciones" rows="3"></textarea>
    </div>

    <div class="form-group">
        <label>Confirmaci칩n Digital:</label>
        <p>Al enviar este formulario, confirmas que has recibido la caba침a y verificas el estado del inventario.</p>
        <label>
            <input type="checkbox" required>
            Confirmo que he verificado el inventario y acepto la entrega de la caba침a
        </label>
    </div>

    <button type="submit" class="btn btn-primary">Confirmar Check-in</button>
    <a href="/reservas/mis-reservas" class="btn btn-secondary">Cancelar</a>
</form>

<style>
.inventario-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin: 1rem 0;
}

.inventario-item {
    padding: 1rem;
    border: 1px solid #dee2e6;
    border-radius: 4px;
    background: #f8f9fa;
}

.inventario-item label {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    cursor: pointer;
}

.inventario-item input[type="checkbox"] {
    margin-top: 0.25rem;
}
</style>

<%- include('../partials/footer') %>




